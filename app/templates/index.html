{% extends "base.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-10 col-xl-8">
        <!-- Hero Section -->
        <div class="text-center mb-5 animate__animated animate__fadeInDown">
            <h1 class="display-4 fw-bold mb-3">Detect Truth with <span class="gradient-text">Precision</span></h1>
            <p class="text-secondary fs-5 mx-auto" style="max-width: 600px;">
                Advanced Multi-Agent system powered by fine-tuned RoBERTa and FLAN-T5 for news authenticity analysis.
            </p>
        </div>

        <!-- Main Analysis Card -->
        <div class="glass-panel p-4 p-md-5 animate__animated animate__fadeIn">
            <div class="mb-5 text-center">
                <h4 class="fw-bold mb-0"><i class="bi bi-cpu-fill me-2 gradient-text"></i>Analyzer Engine</h4>
                <div class="h-1 w-25 bg-primary mx-auto mt-2 opacity-50" style="height: 2px;"></div>
            </div>

            <form id="analysisForm">
                <!-- Input Selector -->
                <div class="mb-4">
                    <label class="form-label text-secondary small fw-bold text-uppercase tracking-wider">Analysis
                        Vector</label>
                    <div class="row g-3">
                        <div class="col-4">
                            <input type="radio" class="btn-check" name="inputType" id="textType" value="text" checked>
                            <label class="btn btn-outline-primary w-100 d-flex flex-column align-items-center py-3"
                                for="textType">
                                <i class="bi bi-text-left fs-3 mb-1"></i>
                                <span class="small font-medium">Text Content</span>
                            </label>
                        </div>
                        <div class="col-4">
                            <input type="radio" class="btn-check" name="inputType" id="urlType" value="url">
                            <label class="btn btn-outline-primary w-100 d-flex flex-column align-items-center py-3"
                                for="urlType">
                                <i class="bi bi-link-45deg fs-3 mb-1"></i>
                                <span class="small font-medium">Article URL</span>
                            </label>
                        </div>
                        <div class="col-4">
                            <input type="radio" class="btn-check" name="inputType" id="pdfType" value="pdf">
                            <label class="btn btn-outline-primary w-100 d-flex flex-column align-items-center py-3"
                                for="pdfType">
                                <i class="bi bi-file-earmark-pdf fs-3 mb-1"></i>
                                <span class="small font-medium">PDF Document</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Input Areas -->
                <div class="mb-4 animate__animated animate__fadeIn" id="textInputGroup">
                    <label class="form-label text-secondary small fw-bold text-uppercase">Paste News Text</label>
                    <textarea class="form-control" id="content" rows="6"
                        placeholder="Paste the news article text here for deep analysis..."></textarea>
                </div>

                <div class="mb-4 d-none animate__animated animate__fadeIn" id="urlInputGroup">
                    <label class="form-label text-secondary small fw-bold text-uppercase">Article Web Address</label>
                    <div class="input-group">
                        <span class="input-group-text bg-transparent border-end-0"><i
                                class="bi bi-browser-chrome"></i></span>
                        <input type="url" class="form-control border-start-0" id="urlContent"
                            placeholder="https://example.com/news/article-abc">
                    </div>
                </div>

                <div class="mb-4 d-none animate__animated animate__fadeIn" id="fileInputGroup">
                    <label class="form-label text-secondary small fw-bold text-uppercase">Drop PDF Document</label>
                    <div class="input-group">
                        <input type="file" class="form-control" id="fileUpload" accept=".pdf">
                        <button class="btn btn-outline-danger" type="button" id="clearFile">
                            <i class="bi bi-trash3-fill"></i>
                        </button>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="text-center pt-3">
                    <button type="submit" class="btn btn-premium btn-lg w-100">
                        <span class="me-2">Start Deep Analysis</span>
                        <i class="bi bi-stars"></i>
                    </button>
                </div>
            </form>

            <div id="loadingSpinner" class="text-center my-5 d-none">
                <div class="spinner-grow text-primary mb-3" style="width: 3rem; height: 3rem;" role="status"></div>
                <h5 class="fw-bold">Orchestrating Agents...</h5>
                <p class="text-secondary small">Gathering context and running classifier...</p>
            </div>

            <div id="resultsContainer" class="mt-5"></div>
        </div>
    </div>
</div>
{% endblock %}